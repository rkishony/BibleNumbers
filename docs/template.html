<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>תנ״ך מ10פר</title>
    <link rel="icon" type="image/png" sizes="64x64" href="favicon.png">

    <link rel="shortcut icon" href="favicon.png">
    <style>
        body {
            font-family: "Arial", sans-serif;
            margin: 0;
            padding: 0;
            direction: rtl;
            background-color: #f9f9f9;
            color: #222;
        }

        .banner {
            width: 100%;
            max-height: 150px;
            object-fit: contain;
            display: block;
            margin: 10px auto;
        }

        .search-bar {
            background-color: #fff;
            padding: 20px;
            margin: 0 20px 20px 20px;
            border-radius: 12px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            justify-content: flex-start;
        }

        .search-bar input[type="number"] {
            padding: 8px 12px;
            font-size: 1em;
            border: 1px solid #ccc;
            border-radius: 8px;
            width: 120px;
        }

        .search-bar button {
            padding: 8px 16px;
            font-size: 1em;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .search-bar button:hover {
            background-color: #45a049;
        }

        .container {
            display: flex;
            flex-direction: column;
            margin: 0 20px; /* no bottom margin */
            padding-bottom: 20px; /* same space inside the container */
        }

        .row {
            display: flex;
            flex-direction: row;
            margin-bottom: 10px;
            align-items: flex-start;
            background-color: #fff;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.05);
        }

        /* sticky footer for dedication */
        .sticky-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #f9f9f9;
            padding: 8px 20px;
            font-size: 0.8em;
            color: #555;
            box-shadow: 0 -1px 5px rgba(0, 0, 0, 0.1);

            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sticky-footer .feedback-link {
            text-decoration: none;
            color: #4CAF50;
        }

        .sticky-footer .feedback-link:hover {
            text-decoration: underline;
        }

        /* make location/verse columns fluid instead of fixed px */
        .locations {
            font-family: "Noto Sans Hebrew", sans-serif;
            flex: 0 0 25%;
            min-width: 80px;
            max-width: 150px;
            text-align: right;
            overflow-wrap: break-word;
            word-wrap: break-word;
            word-break: break-word;
            width: 150px;
            padding-right: 10px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .verses {
            font-family: "Noto Sans Hebrew", sans-serif;
            flex: 1 1 75%;
            flex-grow: 1;
            text-align: right;
            word-wrap: break-word;
            overflow-wrap: break-word;
            box-sizing: border-box;
        }


        /* breakpoint for small screens (phones) */
        @media (max-width: 600px) {
            /* stack search controls vertically */
            .search-bar {
                flex-direction: column;
                align-items: stretch;
            }

            .search-bar label,
            .search-bar input,
            .search-bar button {
                width: 100%;
                margin: 5px 0;
            }

            /* make location column narrower on tiny screens */
            .locations {
                flex: 0 0 30%;
                min-width: 60px;
            }
        }

        .row {
            gap: 12px;
        }

        /* make the number‑inputs narrower on desktop */
        .search-bar input[type="number"] {
            width: 80px; /* was 120px */
        }

        /* --- always keep min/max as a flex row, even on desktop --- */
        .range-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        /* --- mobile tweaks (up to 600px wide) --- */
        @media (max-width: 600px) {
            /* everything except the range‑group still goes full width */
            .search-bar > :not(.range-group) {
                width: 100%;
                margin: 5px 0;
            }

            .range-group {
                display: flex;
                flex-direction: row;
                align-self: flex-start; /* don’t stretch to full width */
                gap: 8px;
                margin: 5px 0;
                width: auto; /* shrink to fit contents */
            }

            .range-group label {
                margin: 0;
                white-space: nowrap; /* keep label next to its input */
            }

            .range-group input {
                flex: 0 0 60px; /* fixed-ish width, no growing */
                margin: 0;
            }
        }

    </style>
</head>
<body>
<a href="https://github.com/rkishony/BibleNumbers" target="_blank" rel="noopener">
    <div style="padding: 0 30px;">
        <img src="transparent_icon.png" alt="תנ״ך מ10פר" class="banner" style="width: 100%; max-width: 100%;">
    </div>
</a>

<div class="search-bar">
    <label for="searchNumber">חיפוש מספר:</label>
    <input type="number" id="searchNumber" placeholder="מספר">
    <button id="searchBtn">חפש</button>

    <div class="range-group">
        <input type="number" id="rangeMin" placeholder="מ-">
        <input type="number" id="rangeMax" placeholder="עד">
    </div>
    <button id="rangeBtn">טווח</button>

    <button id="resetBtn">הצג הכל</button>
</div>
<div id="countStats" style="margin: 0 20px 10px; font-size: 1.1em; color: #444;">
    מספר תוצאות מתאימות: <span id="matchCount">0</span>
</div>
<div class="container">
    <!-- START -->
    <div class="row">
        <div class="locations"><a href="https://www.mgketer.org/mikra/37/7/71" target="_blank">נחמיה ז עא</a></div>
        <div class="verses">וַאֲשֶׁר נָתְנוּ, שְׁאֵרִית הָעָם--זָהָב דַּרְכְּמֹנִים <span style='color:blue'>שְׁתֵּי רִבּוֹא</span><span style='color:green'> [20000]</span>, וְכֶסֶף מָנִים אַלְפָּיִם; וְכָתְנֹת כֹּהֲנִים, <span style='color:blue'>שִׁשִּׁים וְשִׁבְעָה</span><span style='color:green'> [67]</span>.  {פ}</div>
    </div>


    <div class="row">
        <div class="locations"><a href="https://www.mgketer.org/mikra/37/7/72" target="_blank">נחמיה ז עב</a></div>
        <div class="verses">וַיֵּשְׁבוּ הַכֹּהֲנִים וְהַלְוִיִּם וְהַשּׁוֹעֲרִים וְהַמְשֹׁרְרִים וּמִן-הָעָם וְהַנְּתִינִים, וְכָל-יִשְׂרָאֵל--בְּעָרֵיהֶם; וַיִּגַּע <span style='color:blue'>הַחֹדֶשׁ הַשְּׁבִיעִי</span><span style='color:green'> [חודש מספר 7]</span>, וּבְנֵי יִשְׂרָאֵל בְּעָרֵיהֶם.</div>
    </div>


    <div class="row">
        <div class="locations"><a href="https://www.mgketer.org/mikra/37/8/1" target="_blank">נחמיה ח א</a></div>
        <div class="verses">וַיֵּאָסְפוּ כָל-הָעָם, כְּאִישׁ <span style='color:blue'>אֶחָד</span><span style='color:green'> [1]</span>, אֶל-הָרְחוֹב, אֲשֶׁר לִפְנֵי שַׁעַר-הַמָּיִם; וַיֹּאמְרוּ, לְעֶזְרָא הַסֹּפֵר--לְהָבִיא אֶת-סֵפֶר תּוֹרַת מֹשֶׁה, אֲשֶׁר-צִוָּה יְהוָה אֶת-יִשְׂרָאֵל.</div>
    </div>


    <div class="row">
        <div class="locations"><a href="https://www.mgketer.org/mikra/37/8/2" target="_blank">נחמיה ח ב</a></div>
        <div class="verses">וַיָּבִיא עֶזְרָא הַכֹּהֵן אֶת-הַתּוֹרָה לִפְנֵי הַקָּהָל, מֵאִישׁ וְעַד-אִשָּׁה, וְכֹל, מֵבִין לִשְׁמֹעַ--<span style='color:blue'>בְּיוֹם אֶחָד, לַחֹדֶשׁ</span><span style='color:green'> [יום מספר 1]</span> <span style='color:blue'>הַשְּׁבִיעִי</span><span style='color:green'> [חודש מספר 7]</span>.</div>
    </div>
    <!-- END -->
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const searchInput = document.getElementById('searchNumber');
        const rangeMinInput = document.getElementById('rangeMin');
        const rangeMaxInput = document.getElementById('rangeMax');

        const searchBtn = document.getElementById('searchBtn');
        const rangeBtn = document.getElementById('rangeBtn');
        const resetBtn = document.getElementById('resetBtn');

        const rows = Array.from(document.querySelectorAll('.container .row'));
        const matchCountSpan = document.getElementById('matchCount');

        function getNumbersFromRow(row) {
            const spans = row.querySelectorAll('.verses span[style*="color:green"]');
            return Array.from(spans)
                .map(span => {
                    const m = span.textContent.match(/\d+/);
                    return m ? +m[0] : null;
                })
                .filter(n => n !== null);
        }

        function applyFilter(pred) {
            let totalMatches = 0;
            rows.forEach(row => {
                const nums = getNumbersFromRow(row);
                const matchedNums = nums.filter(pred);
                const visible = matchedNums.length > 0;
                row.style.display = visible ? '' : 'none';
                if (visible) totalMatches += matchedNums.length;
            });
            matchCountSpan.textContent = totalMatches;
        }

        function showAllAndCount() {
            let total = 0;
            rows.forEach(row => {
                row.style.display = '';
                const nums = getNumbersFromRow(row);
                total += nums.length;
            });
            matchCountSpan.textContent = total;
        }

        // --- Event handlers ---

        searchBtn.addEventListener('click', () => {
            const v = +searchInput.value;
            if (!isNaN(v)) {
                applyFilter(n => n === v);
            }
        });

        rangeBtn.addEventListener('click', () => {
            const min = +rangeMinInput.value;
            const max = +rangeMaxInput.value;
            if (!isNaN(min) && !isNaN(max)) {
                applyFilter(n => n >= min && n <= max);
            }
        });

        resetBtn.addEventListener('click', () => {
            searchInput.value = '';
            rangeMinInput.value = '';
            rangeMaxInput.value = '';
            showAllAndCount();
        });

        searchInput.addEventListener('keydown', e => {
            if (e.key === 'Enter') searchBtn.click();
        });
        [rangeMinInput, rangeMaxInput].forEach(input => {
            input.addEventListener('keydown', e => {
                if (e.key === 'Enter') rangeBtn.click();
            });
        });

        // --- Initial count on load ---
        showAllAndCount();
    });
</script>

<footer class="sticky-footer">
    <a href="https://github.com/rkishony/BibleNumbers/issues" target="_blank" rel="noopener" class="feedback-link">
        מצאת טעות?
    </a>
    <span>מוקדש באהבה לילדתי יעל קישוני</span>
</footer>
</body>
</html>